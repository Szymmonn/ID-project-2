{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/app/kontuzje/page.tsx"],"sourcesContent":["// frontend/src/app/kontuzje/page.tsx\n\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\ntype Kontuzja = {\n  id_pilkarza: number;\n  id_meczu: number | null;\n  data_kontuzji: string;          // ISO date string\n  opis_kontuzji: string;\n  przewidywany_czas_leczenia_w_dniach: number;\n};\n\nexport default function KontuzjePage() {\n  const router = useRouter();\n  const [lista, setLista] = useState<Kontuzja[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchData = async () => {\n    try {\n      const res = await axios.get<Kontuzja[]>(\"/api/kontuzje/\");\n      setLista(res.data);\n    } catch (err) {\n      console.error(\"Błąd pobierania listy kontuzji:\", err);\n      setError(\"Nie udało się pobrać listy kontuzji.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const handleDelete = async (k: Kontuzja) => {\n    const potwierdz = window.confirm(\n      `Na pewno usunąć kontuzję piłkarza ${k.id_pilkarza} z dnia ${new Date(\n        k.data_kontuzji\n      ).toLocaleDateString(\"pl-PL\")}?`\n    );\n    if (!potwierdz) return;\n\n    try {\n      // Wysyłamy DELETE z trzema parametrami w query stringu\n      await axios.delete(\"/api/kontuzje/\", {\n        params: {\n          id_pilkarza: k.id_pilkarza,\n          data_kontuzji: k.data_kontuzji,\n          opis_kontuzji: k.opis_kontuzji,\n        },\n      });\n      // Odśwież listę\n      fetchData();\n    } catch (err) {\n      console.error(\"Błąd usuwania kontuzji:\", err);\n      setError(\"Nie udało się usunąć kontuzji.\");\n    }\n  };\n\n  if (loading) return <p>Ładowanie listy kontuzji…</p>;\n  if (error)\n    return (\n      <div>\n        <h1>Błąd</h1>\n        <p style={{ color: \"red\" }}>{error}</p>\n      </div>\n    );\n\n  return (\n    <div>\n      <h1>Lista kontuzji</h1>\n\n      <button\n        onClick={() => router.push(\"/kontuzje/dodaj\")}\n        style={{\n          marginBottom: \"1rem\",\n          backgroundColor: \"#0070f3\",\n          color: \"#fff\",\n          padding: \"0.5rem 1rem\",\n          border: \"none\",\n          borderRadius: 4,\n          cursor: \"pointer\",\n        }}\n      >\n        Dodaj nową kontuzję\n      </button>\n\n      <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n        <thead>\n          <tr>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              ID Piłkarza\n            </th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Data kontuzji\n            </th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>Mecz</th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Opis\n            </th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Przew. leczenia (dni)\n            </th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Akcje\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {lista.map((k) => (\n            <tr key={`${k.id_pilkarza}-${k.data_kontuzji}-${k.opis_kontuzji}`}>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                {k.id_pilkarza}\n              </td>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                {new Date(k.data_kontuzji).toLocaleDateString(\"pl-PL\")}\n              </td>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                {k.id_meczu ?? \"-\"}\n              </td>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                {k.opis_kontuzji}\n              </td>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                {k.przewidywany_czas_leczenia_w_dniach}\n              </td>\n              <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                <button\n                  onClick={() => handleDelete(k)}\n                  style={{\n                    backgroundColor: \"#a00\",\n                    color: \"#fff\",\n                    padding: \"0.3rem 0.6rem\",\n                    border: \"none\",\n                    borderRadius: 4,\n                    cursor: \"pointer\",\n                  }}\n                >\n                  Usuń\n                </button>\n              </td>\n            </tr>\n          ))}\n          {lista.length === 0 && (\n            <tr>\n              <td\n                colSpan={6}\n                style={{ textAlign: \"center\", padding: \"1rem\", color: \"#666\" }}\n              >\n                Brak kontuzji w bazie.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}