{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/api/index.js"],"sourcesContent":["// src/api/index.js\n\nimport axios from \"axios\";\n\n// Jeśli Twój FastAPI działa np. pod http://127.0.0.1:8000\nconst API_BASE = \"http://localhost:8000\";\n\nexport const api = axios.create({\n  baseURL: API_BASE,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Przykład wrappera GET wszystkich z danej tabeli\nexport const getAll = (entity) => api.get(`/api/${entity}/`);\n\n// GET jednego po ID\nexport const getOne = (entity, id) => api.get(`/api/${entity}/${id}`);\n\n// POST – tworzenie nowego\nexport const createOne = (entity, data) => api.post(`/api/${entity}/`, data);\n\n// PUT – aktualizacja po ID\nexport const updateOne = (entity, id, data) =>\n  api.put(`/api/${entity}/${id}`, data);\n\n// DELETE – usuwanie po ID\nexport const deleteOne = (entity, id) => api.delete(`/api/${entity}/${id}`);\n\n// W przypadku tabel z kluczem złożonym (np. pilkarz_pozycja czy klub_budzet),\n// będziesz musiał dopasować endpointy do konstrukcji /api/kluby_budzet/?id_klubu=…&data=…\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;;;;AAEnB;;AAEA,0DAA0D;AAC1D,MAAM,WAAW;AAEV,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,SAAS,CAAC,SAAW,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AAGpD,MAAM,SAAS,CAAC,QAAQ,KAAO,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,IAAI;AAG7D,MAAM,YAAY,CAAC,QAAQ,OAAS,IAAI,IAAI,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,EAAE;AAGhE,MAAM,YAAY,CAAC,QAAQ,IAAI,OACpC,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,IAAI,EAAE;AAG3B,MAAM,YAAY,CAAC,QAAQ,KAAO,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,IAAI,GAE1E,8EAA8E;CAC9E,0FAA0F","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/app/pilkarze-pozycja/page.tsx"],"sourcesContent":["// frontend/src/app/pilkarze-pozycja/page.tsx\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { getAll } from \"@/api\";\n\ntype Pilkarz = {\n  id_pilkarza: number;\n  imie: string;\n  nazwisko: string;\n};\n\ntype Pozycja = {\n  id_pozycja: number;\n  skrot: string;\n  pelna_nazwa: string;\n};\n\ntype Relacja = {\n  id_pilkarza: number;\n  id_pozycja: number;\n};\n\nexport default function PilkarzePozycjaListPage() {\n  const [pilkarze, setPilkarze] = useState<Pilkarz[]>([]);\n  const [pozycje, setPozycje] = useState<Pozycja[]>([]);\n  const [relacje, setRelacje] = useState<Relacja[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [mapaRelacji, setMapaRelacji] = useState<Record<number, number[]>>({});\n\n  // 1) Pobranie wszystkich danych (piłkarze, pozycje, relacje) na raz\n  const fetchAll = async () => {\n    try {\n      // GET /api/pilkarze/\n      const resPil = await getAll(\"pilkarze\");\n      // GET /api/pilkarz_pozycja/\n      const resRel = await getAll(\"pilkarz_pozycja\");\n      // GET /api/pozycje/\n      const resPoz = await getAll(\"pozycje\");\n\n      setPilkarze(resPil.data);\n      setRelacje(resRel.data);\n      setPozycje(resPoz.data);\n\n      // Zbuduj mapę relacji: id_pilkarza → [id_pozycja, ...]\n      const mapa: Record<number, number[]> = {};\n      resRel.data.forEach((r: Relacja) => {\n        if (!mapa[r.id_pilkarza]) mapa[r.id_pilkarza] = [];\n        mapa[r.id_pilkarza].push(r.id_pozycja);\n      });\n      setMapaRelacji(mapa);\n    } catch (err) {\n      console.error(\"Błąd pobierania danych relacji piłkarz→pozycja:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAll();\n  }, []);\n\n  // 2) Usunięcie danej relacji: DELETE /api/pilkarz_pozycja/?id_pilkarza=…&id_pozycja=…\n  const handleUsunRelacje = async (idPilkarza: number, idPozycji: number) => {\n    if (\n      !confirm(\n        `Na pewno chcesz usunąć pozycję (${idPozycji}) dla piłkarza (${idPilkarza})?`\n      )\n    ) {\n      return;\n    }\n\n    try {\n      const url = `/api/pilkarz_pozycja/?id_pilkarza=${idPilkarza}&id_pozycja=${idPozycji}`;\n      const res = await fetch(url, { method: \"DELETE\" });\n      if (!res.ok) {\n        throw new Error(`HTTP ${res.status}`);\n      }\n      // Jeśli usunięcie powiodło się, usuń tę relację z lokalnego stanu:\n      setMapaRelacji((prev) => {\n        const next = { ...prev };\n        if (next[idPilkarza]) {\n          next[idPilkarza] = next[idPilkarza].filter((pid) => pid !== idPozycji);\n        }\n        return next;\n      });\n    } catch (err) {\n      console.error(\"Błąd usuwania relacji:\", err);\n      alert(\"Nie udało się usunąć relacji. Sprawdź konsolę.\");\n    }\n  };\n\n  if (loading) {\n    return <p>Ładowanie relacji piłkarz→pozycja…</p>;\n  }\n\n  return (\n    <div>\n      <h1>Piłkarze i ich pozycje</h1>\n      <Link href=\"/pilkarze-pozycja/dodaj\">\n        <button\n          style={{\n            marginBottom: \"1rem\",\n            padding: \"0.5rem 1rem\",\n            backgroundColor: \"#0070f3\",\n            color: \"#fff\",\n            border: \"none\",\n            borderRadius: 4,\n            cursor: \"pointer\",\n          }}\n        >\n          Przypisz nową pozycję piłkarzowi\n        </button>\n      </Link>\n\n      <table style={{ borderCollapse: \"collapse\", width: \"100%\" }}>\n        <thead>\n          <tr style={{ backgroundColor: \"#f0f0f0\" }}>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>ID</th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>Imię</th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>Nazwisko</th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Pozycje\n            </th>\n            <th style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n              Akcje\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {pilkarze.map((p) => {\n            const idsPozycji = mapaRelacji[p.id_pilkarza] || [];\n            const nazwyPozycji = idsPozycji.map((idPoz) => {\n              const poz = pozycje.find((x) => x.id_pozycja === idPoz);\n              return poz ? poz.skrot : `?(${idPoz})`;\n            });\n\n            return (\n              <tr key={p.id_pilkarza}>\n                <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                  {p.id_pilkarza}\n                </td>\n                <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                  {p.imie}\n                </td>\n                <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                  {p.nazwisko}\n                </td>\n                <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                  {nazwyPozycji.length > 0 ? (\n                    nazwyPozycji.join(\", \")\n                  ) : (\n                    <em>brak pozycji</em>\n                  )}\n                </td>\n                <td style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}>\n                  {idsPozycji.map((idPoz) => {\n                    const skr = pozycje.find((x) => x.id_pozycja === idPoz)?.skrot || idPoz;\n                    return (\n                      <button\n                        key={`${p.id_pilkarza}-${idPoz}`}\n                        onClick={() => handleUsunRelacje(p.id_pilkarza, idPoz)}\n                        style={{ marginRight: 4 }}\n                      >\n                        Usuń {skr}\n                      </button>\n                    );\n                  })}\n                  {idsPozycji.length === 0 && <span>—</span>}\n                </td>\n              </tr>\n            );\n          })}\n          {pilkarze.length === 0 && (\n            <tr>\n              <td\n                colSpan={5}\n                style={{ border: \"1px solid #ccc\", padding: \"0.5rem\" }}\n              >\n                Brak piłkarzy w bazie\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,6CAA6C;;;;;AAG7C;AACA;AACA;AAJA;;;;;AAuBe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA4B,CAAC;IAE1E,oEAAoE;IACpE,MAAM,WAAW;QACf,IAAI;YACF,qBAAqB;YACrB,MAAM,SAAS,MAAM,CAAA,GAAA,mHAAA,CAAA,SAAM,AAAD,EAAE;YAC5B,4BAA4B;YAC5B,MAAM,SAAS,MAAM,CAAA,GAAA,mHAAA,CAAA,SAAM,AAAD,EAAE;YAC5B,oBAAoB;YACpB,MAAM,SAAS,MAAM,CAAA,GAAA,mHAAA,CAAA,SAAM,AAAD,EAAE;YAE5B,YAAY,OAAO,IAAI;YACvB,WAAW,OAAO,IAAI;YACtB,WAAW,OAAO,IAAI;YAEtB,uDAAuD;YACvD,MAAM,OAAiC,CAAC;YACxC,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,EAAE,IAAI,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE;gBAClD,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,EAAE,UAAU;YACvC;YACA,eAAe;QACjB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,mDAAmD;QACnE,SAAU;YACR,WAAW;QACb;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,sFAAsF;IACtF,MAAM,oBAAoB,OAAO,YAAoB;QACnD,IACE,CAAC,QACC,CAAC,gCAAgC,EAAE,UAAU,gBAAgB,EAAE,WAAW,EAAE,CAAC,GAE/E;YACA;QACF;QAEA,IAAI;YACF,MAAM,MAAM,CAAC,kCAAkC,EAAE,WAAW,YAAY,EAAE,WAAW;YACrF,MAAM,MAAM,MAAM,MAAM,KAAK;gBAAE,QAAQ;YAAS;YAChD,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;YACtC;YACA,mEAAmE;YACnE,eAAe,CAAC;gBACd,MAAM,OAAO;oBAAE,GAAG,IAAI;gBAAC;gBACvB,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAQ,QAAQ;gBAC9D;gBACA,OAAO;YACT;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACR;IACF;IAEA,IAAI,SAAS;QACX,qBAAO,8OAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,4JAAA,CAAA,UAAI;gBAAC,MAAK;0BACT,cAAA,8OAAC;oBACC,OAAO;wBACL,cAAc;wBACd,SAAS;wBACT,iBAAiB;wBACjB,OAAO;wBACP,QAAQ;wBACR,cAAc;wBACd,QAAQ;oBACV;8BACD;;;;;;;;;;;0BAKH,8OAAC;gBAAM,OAAO;oBAAE,gBAAgB;oBAAY,OAAO;gBAAO;;kCACxD,8OAAC;kCACC,cAAA,8OAAC;4BAAG,OAAO;gCAAE,iBAAiB;4BAAU;;8CACtC,8OAAC;oCAAG,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CAAG;;;;;;8CAC5D,8OAAC;oCAAG,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CAAG;;;;;;8CAC5D,8OAAC;oCAAG,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CAAG;;;;;;8CAC5D,8OAAC;oCAAG,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CAAG;;;;;;8CAG5D,8OAAC;oCAAG,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CAAG;;;;;;;;;;;;;;;;;kCAKhE,8OAAC;;4BACE,SAAS,GAAG,CAAC,CAAC;gCACb,MAAM,aAAa,WAAW,CAAC,EAAE,WAAW,CAAC,IAAI,EAAE;gCACnD,MAAM,eAAe,WAAW,GAAG,CAAC,CAAC;oCACnC,MAAM,MAAM,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;oCACjD,OAAO,MAAM,IAAI,KAAK,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;gCACxC;gCAEA,qBACE,8OAAC;;sDACC,8OAAC;4CAAG,OAAO;gDAAE,QAAQ;gDAAkB,SAAS;4CAAS;sDACtD,EAAE,WAAW;;;;;;sDAEhB,8OAAC;4CAAG,OAAO;gDAAE,QAAQ;gDAAkB,SAAS;4CAAS;sDACtD,EAAE,IAAI;;;;;;sDAET,8OAAC;4CAAG,OAAO;gDAAE,QAAQ;gDAAkB,SAAS;4CAAS;sDACtD,EAAE,QAAQ;;;;;;sDAEb,8OAAC;4CAAG,OAAO;gDAAE,QAAQ;gDAAkB,SAAS;4CAAS;sDACtD,aAAa,MAAM,GAAG,IACrB,aAAa,IAAI,CAAC,sBAElB,8OAAC;0DAAG;;;;;;;;;;;sDAGR,8OAAC;4CAAG,OAAO;gDAAE,QAAQ;gDAAkB,SAAS;4CAAS;;gDACtD,WAAW,GAAG,CAAC,CAAC;oDACf,MAAM,MAAM,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,QAAQ,SAAS;oDAClE,qBACE,8OAAC;wDAEC,SAAS,IAAM,kBAAkB,EAAE,WAAW,EAAE;wDAChD,OAAO;4DAAE,aAAa;wDAAE;;4DACzB;4DACO;;uDAJD,GAAG,EAAE,WAAW,CAAC,CAAC,EAAE,OAAO;;;;;gDAOtC;gDACC,WAAW,MAAM,KAAK,mBAAK,8OAAC;8DAAK;;;;;;;;;;;;;mCA9B7B,EAAE,WAAW;;;;;4BAkC1B;4BACC,SAAS,MAAM,KAAK,mBACnB,8OAAC;0CACC,cAAA,8OAAC;oCACC,SAAS;oCACT,OAAO;wCAAE,QAAQ;wCAAkB,SAAS;oCAAS;8CACtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf","debugId":null}}]
}