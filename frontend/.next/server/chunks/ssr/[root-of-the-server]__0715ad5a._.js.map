{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/app/oferty-klub-klub/page.tsx"],"sourcesContent":["// File: pages/oferty-klub-klub/index.tsx\nimport { useState, useEffect, ChangeEvent, FormEvent } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\n\ninterface Oferta {\n  id_oferty_dla_klubu: number;\n  id_pilkarza: number;\n  id_klubu: number;\n  data_zlozenia_oferty: string; // ISO string z FastAPI\n  id_agenta_klubu1: number | null;\n  id_agenta_klubu2: number | null;\n  czy_zaakceptowana: boolean;\n  do_negocjacji: boolean;\n  kto_sklada_oferte: string;\n  zaplata: number;\n  ilosc_rat: number | null;\n  // ... (pozostałe pola jeżeli chcesz je wyświetlać)\n  uwagi: string | null;\n}\n\nconst OfertyKlubKlubPage = () => {\n  const router = useRouter();\n\n  // stan na dane i na filtry\n  const [oferty, setOferty] = useState<Oferta[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // wartości filtrów\n  const [filterPilkarz, setFilterPilkarz] = useState<string>('');\n  const [filterKlub, setFilterKlub] = useState<string>('');\n  const [filterZaakceptowana, setFilterZaakceptowana] = useState<string>('');\n  const [filterDataZlozenia, setFilterDataZlozenia] = useState<string>('');\n\n  // Zwraca querystring na podstawie aktualnych filtrów\n  const buildQueryParams = () => {\n    const params = new URLSearchParams();\n    if (filterPilkarz.trim() !== '') {\n      params.append('id_pilkarza', filterPilkarz.trim());\n    }\n    if (filterKlub.trim() !== '') {\n      params.append('id_klubu', filterKlub.trim());\n    }\n    if (filterZaakceptowana === 'true' || filterZaakceptowana === 'false') {\n      params.append('czy_zaakceptowana', filterZaakceptowana);\n    }\n    if (filterDataZlozenia.trim() !== '') {\n      params.append('data_zlozenia_oferty', filterDataZlozenia.trim());\n    }\n    return params.toString() ? `?${params.toString()}` : '';\n  };\n\n  // fetch danych z API\n  const fetchOferty = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const query = buildQueryParams();\n      const resp = await axios.get<Oferta[]>(`http://localhost:8000/api/oferty_transferowe_klub_klub/${query}`);\n      setOferty(resp.data);\n    } catch (e: any) {\n      console.error('Błąd pobierania ofert:', e);\n      setError('Nie udało się pobrać ofert.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // uruchamiamy fetch na mount i przy zmianie filtrów\n  useEffect(() => {\n    fetchOferty();\n  }, [filterPilkarz, filterKlub, filterZaakceptowana, filterDataZlozenia]);\n\n  // obsługa usuwania\n  const handleDelete = async (id: number) => {\n    if (!confirm('Na pewno chcesz usunąć tę ofertę?')) return;\n    try {\n      await axios.delete(`http://localhost:8000/api/oferty_transferowe_klub_klub/${id}`);\n      // odświeżenie listy\n      fetchOferty();\n    } catch (e: any) {\n      console.error('Błąd usuwania oferty:', e);\n      alert('Nie udało się usunąć oferty.');\n    }\n  };\n\n  // obsługa filtrowania — proste settery\n  const onPilkarzChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setFilterPilkarz(e.target.value);\n  };\n  const onKlubChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setFilterKlub(e.target.value);\n  };\n  const onZaakceptowanaChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    setFilterZaakceptowana(e.target.value);\n  };\n  const onDataZlozeniaChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setFilterDataZlozenia(e.target.value);\n  };\n\n  return (\n    <div style={{ padding: '1rem' }}>\n      <h1>Oferty Klub→Klub</h1>\n\n      <button\n        onClick={() => router.push('/oferty-klub-klub/create')}\n        style={{ marginBottom: '1rem' }}\n      >\n        Nowa oferta\n      </button>\n\n      {/* Formularz filtrów */}\n      <fieldset style={{ border: '1px solid #ccc', padding: '1rem', marginBottom: '1rem' }}>\n        <legend>Filtry</legend>\n        <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n          <div>\n            <label>ID Pilkarza:</label>\n            <br />\n            <input\n              type=\"number\"\n              value={filterPilkarz}\n              onChange={onPilkarzChange}\n              placeholder=\"np. 3\"\n            />\n          </div>\n\n          <div>\n            <label>ID Klubu:</label>\n            <br />\n            <input\n              type=\"number\"\n              value={filterKlub}\n              onChange={onKlubChange}\n              placeholder=\"np. 5\"\n            />\n          </div>\n\n          <div>\n            <label>Czy zaakceptowana:</label>\n            <br />\n            <select value={filterZaakceptowana} onChange={onZaakceptowanaChange}>\n              <option value=\"\">(Wszystkie)</option>\n              <option value=\"true\">Tak</option>\n              <option value=\"false\">Nie</option>\n            </select>\n          </div>\n\n          <div>\n            <label>Data złożenia oferty:</label>\n            <br />\n            <input\n              type=\"date\"\n              value={filterDataZlozenia}\n              onChange={onDataZlozeniaChange}\n            />\n          </div>\n        </div>\n      </fieldset>\n\n      {/* Komunikaty */}\n      {loading && <p>Ładowanie ofert…</p>}\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n\n      {/* Tabela wyników */}\n      {!loading && !error && (\n        <table\n          style={{\n            width: '100%',\n            borderCollapse: 'collapse',\n            marginTop: '1rem',\n          }}\n        >\n          <thead>\n            <tr>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>ID</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>ID Pilkarza</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>ID Klubu</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>Data</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>Zaplata</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>Zaakceptowana</th>\n              <th style={{ border: '1px solid #ddd', padding: '0.5rem' }}>Akcje</th>\n            </tr>\n          </thead>\n          <tbody>\n            {oferty.map((o) => (\n              <tr key={o.id_oferty_dla_klubu}>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {o.id_oferty_dla_klubu}\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {o.id_pilkarza}\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {o.id_klubu}\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {new Date(o.data_zlozenia_oferty).toLocaleDateString()}\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {o.zaplata.toLocaleString()} PLN\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  {o.czy_zaakceptowana ? 'Tak' : 'Nie'}\n                </td>\n                <td style={{ border: '1px solid #ddd', padding: '0.5rem' }}>\n                  <button\n                    onClick={() =>\n                      router.push(`/oferty-klub-klub/edit/${o.id_oferty_dla_klubu}`)\n                    }\n                    style={{ marginRight: '0.5rem' }}\n                  >\n                    Edytuj\n                  </button>\n                  <button\n                    onClick={() => handleDelete(o.id_oferty_dla_klubu)}\n                    style={{ backgroundColor: '#f44336', color: '#fff' }}\n                  >\n                    Usuń\n                  </button>\n                </td>\n              </tr>\n            ))}\n            {oferty.length === 0 && (\n              <tr>\n                <td colSpan={7} style={{ textAlign: 'center', padding: '1rem' }}>\n                  Brak ofert do wyświetlenia\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default OfertyKlubKlubPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}