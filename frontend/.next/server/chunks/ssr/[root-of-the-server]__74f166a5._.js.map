{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/app/oferty-klub-klub/page.tsx"],"sourcesContent":["// File: src/app/oferty-klub-klub/page.tsx\n\"use client\"\n\nimport { useState, useEffect, ChangeEvent, FormEvent } from \"react\";\nimport axios from \"axios\";\nimport { useRouter } from \"next/navigation\";\n\ninterface Oferta {\n  id_oferty_dla_klubu: number;\n  id_pilkarza: number;\n  id_klubu: number;\n  data_zlozenia_oferty: string;\n  czy_zaakceptowana: boolean;\n}\n\nexport default function OfertyListaPage() {\n  const router = useRouter();\n\n  // Stany listy + loading + error\n  const [oferty, setOferty] = useState<Oferta[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Stany filtrów\n  const [filtrPilkarza, setFiltrPilkarza] = useState<string>(\"\");\n  const [filtrKlubu, setFiltrKlubu] = useState<string>(\"\");\n  const [filtrZaakceptowane, setFiltrZaakceptowane] = useState<string>(\"\"); // \"\", \"true\", \"false\"\n\n  useEffect(() => {\n    fetchOferty();\n  }, []);\n\n  const fetchOferty = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const params = new URLSearchParams();\n      if (filtrPilkarza.trim() !== \"\") {\n        params.append(\"id_pilkarza\", filtrPilkarza.trim());\n      }\n      if (filtrKlubu.trim() !== \"\") {\n        params.append(\"id_klubu\", filtrKlubu.trim());\n      }\n      if (filtrZaakceptowane === \"true\" || filtrZaakceptowane === \"false\") {\n        params.append(\"czy_zaakceptowana\", filtrZaakceptowane);\n      }\n      const queryString = params.toString() ? `?${params.toString()}` : \"\";\n      const url = `http://localhost:8000/api/oferty_transferowe_klub_klub/${queryString}`;\n      const res = await axios.get<Oferta[]>(url);\n      setOferty(res.data);\n    } catch (e: any) {\n      setError(e.response?.data?.detail || e.message);\n      setOferty([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFilterSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    fetchOferty();\n  };\n\n  // Usuwanie oferty\n  const handleDelete = async (id: number) => {\n    if (!confirm(\"Na pewno chcesz usunąć tę ofertę?\")) return;\n    try {\n      await axios.delete(`http://localhost:8000/api/oferty_transferowe_klub_klub/${id}`);\n      fetchOferty();\n    } catch (e: any) {\n      alert(\"Błąd przy usuwaniu: \" + (e.response?.data?.detail || e.message));\n    }\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">Oferty Klub→Klub</h1>\n        <button\n          onClick={() => router.push(\"/oferty-klub-klub/dodaj\")}\n          className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\n        >\n          + Dodaj nową ofertę\n        </button>\n      </div>\n\n      {/* Formularz filtrów */}\n      <form\n        onSubmit={handleFilterSubmit}\n        className=\"border rounded p-4 grid grid-cols-1 md:grid-cols-4 gap-4\"\n      >\n        <div>\n          <label className=\"block text-sm font-medium\">ID Piłkarza</label>\n          <input\n            type=\"number\"\n            value={filtrPilkarza}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setFiltrPilkarza(e.target.value)\n            }\n            className=\"mt-1 block w-full border rounded p-1\"\n            placeholder=\"np. 3\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium\">ID Klubu</label>\n          <input\n            type=\"number\"\n            value={filtrKlubu}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setFiltrKlubu(e.target.value)\n            }\n            className=\"mt-1 block w-full border rounded p-1\"\n            placeholder=\"np. 5\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium\">Zaakceptowana?</label>\n          <select\n            value={filtrZaakceptowane}\n            onChange={(e: ChangeEvent<HTMLSelectElement>) =>\n              setFiltrZaakceptowane(e.target.value)\n            }\n            className=\"mt-1 block w-full border rounded p-1\"\n          >\n            <option value=\"\">— dowolnie —</option>\n            <option value=\"true\">Tak</option>\n            <option value=\"false\">Nie</option>\n          </select>\n        </div>\n        <div className=\"flex items-end\">\n          <button\n            type=\"submit\"\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full\"\n          >\n            Filtruj\n          </button>\n        </div>\n      </form>\n\n      {/* Tabela ofert */}\n      {loading && <p>Ładowanie ofert…</p>}\n      {error && <p className=\"text-red-600\">Błąd: {error}</p>}\n\n      {!loading && !error && (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full border-collapse border\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"px-3 py-2 border\">ID Oferty</th>\n                <th className=\"px-3 py-2 border\">ID Piłkarza</th>\n                <th className=\"px-3 py-2 border\">ID Klubu</th>\n                <th className=\"px-3 py-2 border\">Data złożenia</th>\n                <th className=\"px-3 py-2 border\">Zaakceptowana</th>\n                <th className=\"px-3 py-2 border\">Opcje</th>\n              </tr>\n            </thead>\n            <tbody>\n              {oferty.map((o) => (\n                <tr key={o.id_oferty_dla_klubu} className=\"hover:bg-gray-50\">\n                  <td className=\"px-3 py-2 border\">{o.id_oferty_dla_klubu}</td>\n                  <td className=\"px-3 py-2 border\">{o.id_pilkarza}</td>\n                  <td className=\"px-3 py-2 border\">{o.id_klubu}</td>\n                  <td className=\"px-3 py-2 border\">{o.data_zlozenia_oferty}</td>\n                  <td className=\"px-3 py-2 border\">\n                    {o.czy_zaakceptowana ? \"Tak\" : \"Nie\"}\n                  </td>\n                  <td className=\"px-3 py-2 border space-x-2\">\n                    <button\n                      onClick={() =>\n                        router.push(\n                          `/oferty-klub-klub/${o.id_oferty_dla_klubu}/edytuj`\n                        )\n                      }\n                      className=\"text-blue-600 hover:underline\"\n                    >\n                      Edytuj\n                    </button>\n                    <button\n                      onClick={() => handleDelete(o.id_oferty_dla_klubu)}\n                      className=\"text-red-600 hover:underline ml-2\"\n                    >\n                      Usuń\n                    </button>\n                  </td>\n                </tr>\n              ))}\n              {oferty.length === 0 && (\n                <tr>\n                  <td\n                    colSpan={6}\n                    className=\"px-3 py-2 border text-center text-gray-500\"\n                  >\n                    Brak ofert do wyświetlenia.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}