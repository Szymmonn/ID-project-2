{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/szymon/Desktop/ID-TCS-projekt/frontend/src/app/oferty-klub-klub/dodaj/page.tsx"],"sourcesContent":["// File: src/app/oferty-klub-klub/create/page.tsx\n\"use client\"\n\nimport { useState, useEffect, ChangeEvent, FormEvent } from \"react\";\nimport axios from \"axios\";\nimport { useRouter } from \"next/navigation\";\n\ninterface Pilkarz {\n  id_pilkarza: number;\n  imie: string;\n  nazwisko: string;\n}\ninterface Klub {\n  id_klubu: number;\n  nazwa: string;\n}\ninterface Agent {\n  id_agenta: number;\n  imie: string;\n  nazwisko: string;\n}\n\nexport default function OfertyCreatePage() {\n  const router = useRouter();\n\n  // Stany list, aby wypełnić selecty\n  const [pilkarze, setPilkarze] = useState<Pilkarz[]>([]);\n  const [kluby, setKluby] = useState<Klub[]>([]);\n  const [agenci, setAgenci] = useState<Agent[]>([]);\n\n  // Stany pól formularza\n  const [idPilkarza, setIdPilkarza] = useState<string>(\"\");\n  const [idKlubu, setIdKlubu] = useState<string>(\"\");\n  const [dataZlozenia, setDataZlozenia] = useState<string>(\"\");\n  const [idAgenta1, setIdAgenta1] = useState<string>(\"\"); // opcjonalnie\n  const [idAgenta2, setIdAgenta2] = useState<string>(\"\"); // opcjonalnie\n  const [czyZaakceptowana, setCzyZaakceptowana] = useState<boolean>(false);\n  const [doNegocjacji, setDoNegocjacji] = useState<boolean>(true);\n  const [ktoSklada, setKtoSklada] = useState<string>(\"\");\n  const [zaplata, setZaplata] = useState<string>(\"0\");\n  const [iloscRat, setIloscRat] = useState<string>(\"1\");\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Przy montowaniu pobierz listy do selectów\n  useEffect(() => {\n    const fetchLists = async () => {\n      try {\n        const [pilRes, klubRes, agentRes] = await Promise.all([\n          axios.get<Pilkarz[]>(\"http://localhost:8000/api/pilkarze/\"),\n          axios.get<Klub[]>(\"http://localhost:8000/api/kluby/\"),\n          axios.get<Agent[]>(\"http://localhost:8000/api/agenci/\"),\n        ]);\n        setPilkarze(pilRes.data);\n        setKluby(klubRes.data);\n        setAgenci(agentRes.data);\n      } catch (e) {\n        console.error(\"Błąd pobierania list:\", e);\n      }\n    };\n    fetchLists();\n  }, []);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Podstawowa walidacja\n    if (!idPilkarza || !idKlubu || !dataZlozenia || !ktoSklada || !zaplata || !iloscRat) {\n      setError(\"Wypełnij wszystkie wymagane pola oznaczone *\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const payload = {\n        id_pilkarza: Number(idPilkarza),\n        id_klubu: Number(idKlubu),\n        data_zlozenia_oferty: dataZlozenia,\n        id_agenta_klubu1: idAgenta1 ? Number(idAgenta1) : null,\n        id_agenta_klubu2: idAgenta2 ? Number(idAgenta2) : null,\n        czy_zaakceptowana: czyZaakceptowana,\n        do_negocjacji: doNegocjacji,\n        kto_sklada_oferte: ktoSklada,\n        zaplata: Number(zaplata),\n        ilosc_rat: Number(iloscRat),\n      };\n      await axios.post(\"http://localhost:8000/api/oferty_transferowe_klub_klub/\", payload);\n      router.push(\"/oferty-klub-klub\");\n    } catch (e: any) {\n      setError(e.response?.data?.detail || e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"p-6 max-w-lg mx-auto\">\n      <h1 className=\"text-2xl font-bold mb-4\">Dodaj nową ofertę Klub→Klub</h1>\n      {error && <p className=\"mb-4 text-red-600\">{error}</p>}\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Select: Pilkarz */}\n        <div>\n          <label className=\"block font-medium\">Piłkarz*</label>\n          <select\n            value={idPilkarza}\n            onChange={(e: ChangeEvent<HTMLSelectElement>) => setIdPilkarza(e.target.value)}\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n          >\n            <option value=\"\">— wybierz piłkarza —</option>\n            {pilkarze.map((p) => (\n              <option key={p.id_pilkarza} value={p.id_pilkarza}>\n                {p.imie} {p.nazwisko} (#{p.id_pilkarza})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Select: Klub */}\n        <div>\n          <label className=\"block font-medium\">Klub*</label>\n          <select\n            value={idKlubu}\n            onChange={(e: ChangeEvent<HTMLSelectElement>) => setIdKlubu(e.target.value)}\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n          >\n            <option value=\"\">— wybierz klub —</option>\n            {kluby.map((k) => (\n              <option key={k.id_klubu} value={k.id_klubu}>\n                {k.nazwa} (#{k.id_klubu})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Data złożenia oferty */}\n        <div>\n          <label className=\"block font-medium\">Data złożenia*</label>\n          <input\n            type=\"date\"\n            value={dataZlozenia}\n            onChange={(e: ChangeEvent<HTMLInputElement>) => setDataZlozenia(e.target.value)}\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n          />\n        </div>\n\n        {/* Select: Agent Klubu 1 (opcjonalnie) */}\n        <div>\n          <label className=\"block font-medium\">Agent Klubu 1 (opcjonalnie)</label>\n          <select\n            value={idAgenta1}\n            onChange={(e: ChangeEvent<HTMLSelectElement>) => setIdAgenta1(e.target.value)}\n            className=\"mt-1 block w-full border rounded p-1\"\n          >\n            <option value=\"\">— brak —</option>\n            {agenci.map((a) => (\n              <option key={a.id_agenta} value={a.id_agenta}>\n                {a.imie} {a.nazwisko} (#{a.id_agenta})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Select: Agent Klubu 2 (opcjonalnie) */}\n        <div>\n          <label className=\"block font-medium\">Agent Klubu 2 (opcjonalnie)</label>\n          <select\n            value={idAgenta2}\n            onChange={(e: ChangeEvent<HTMLSelectElement>) => setIdAgenta2(e.target.value)}\n            className=\"mt-1 block w-full border rounded p-1\"\n          >\n            <option value=\"\">— brak —</option>\n            {agenci.map((a) => (\n              <option key={a.id_agenta} value={a.id_agenta}>\n                {a.imie} {a.nazwisko} (#{a.id_agenta})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Czy zaakceptowana */}\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"checkbox\"\n            checked={czyZaakceptowana}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setCzyZaakceptowana(e.target.checked)\n            }\n            id=\"accepted_create\"\n            className=\"mr-1\"\n          />\n          <label htmlFor=\"accepted_create\">Czy zaakceptowana?</label>\n        </div>\n\n        {/* Do negocjacji */}\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"checkbox\"\n            checked={doNegocjacji}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setDoNegocjacji(e.target.checked)\n            }\n            id=\"negocjacje_create\"\n            className=\"mr-1\"\n          />\n          <label htmlFor=\"negocjacje_create\">Do negocjacji?</label>\n        </div>\n\n        {/* Kto składa ofertę */}\n        <div>\n          <label className=\"block font-medium\">Kto składa ofertę*</label>\n          <input\n            type=\"text\"\n            value={ktoSklada}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setKtoSklada(e.target.value)\n            }\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n          />\n        </div>\n\n        {/* Zapłata */}\n        <div>\n          <label className=\"block font-medium\">Zapłata (kwota)*</label>\n          <input\n            type=\"number\"\n            value={zaplata}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setZaplata(e.target.value)\n            }\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n            min={0}\n          />\n        </div>\n\n        {/* Ilość rat */}\n        <div>\n          <label className=\"block font-medium\">Ilość rat*</label>\n          <input\n            type=\"number\"\n            value={iloscRat}\n            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n              setIloscRat(e.target.value)\n            }\n            required\n            className=\"mt-1 block w-full border rounded p-1\"\n            min={1}\n          />\n        </div>\n\n        <div className=\"flex space-x-2 mt-4\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n          >\n            {loading ? \"Zapisywanie…\" : \"Zapisz\"}\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => router.push(\"/oferty-klub-klub\")}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n          >\n            Anuluj\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}